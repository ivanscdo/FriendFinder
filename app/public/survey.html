<!doctype html>
<html lang="en">
    <head>
        <!-- Required meta tags -->
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

        <!-- Bootstrap CSS -->
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/css/bootstrap.min.css" integrity="sha384-9gVQ4dYFwwWSjIDZnLEWnxCjeSWFphJiwGPXr1jddIhOegiu1FwO5qRGvFXOdJZ4" crossorigin="anonymous">

        <title>Friend Finder</title>
    </head>
    <body>
        <div class="container">
            <div class="jumbotron">
                <h1 class="text-center">Let's find some friends!</h1>
                <hr>
                <br>
                <form>
                    <div class="form-group">
                        <label for="name">Name</label>
                        <input type="text" class="form-control" id="name" placeholder="Required" required>
                    </div>
                    <div class="form-group">
                            <label for="photo">Link to Photo Image</label>
                            <input type="text" class="form-control" id="photo" placeholder="Required" required>
                    </div>
                    <div class="form-group">
                        <label for="Q1">I like pineapple on my pizza</label>
                        <select class="form-control" id="Q1">
                        <option value="1">1 - No.</option>
                        <option value="2">2 - I don't, but I also kick puppies.</option>
                        <option value="3">3 - Meh, pizza's pizza.</option>
                        <option value="4">4 - You betcha.</option>
                        <option value="5">5 - Pepperoni, pineapple, japapeno is the holy trinity.</option>
                        </select>
                    </div>
                    <div class="form-group">
                            <label for="Q2">Toilet paper goes over, not under</label>
                            <select class="form-control" id="Q2">
                            <option value="1">1 - Under</option>
                            <option value="2">2 - I wipe with a rock</option>
                            <option value="3">3 - Over</option>
                            <option value="4">4 - Bidet baby!</option>
                            <option value="5">5 - Over, but I also go to my friends' places and reverse the roll to mess with them</option>
                            </select>
                    </div>
                    <div class="form-group">
                            <label for="Q3">I cut my sandwiches and toast horizontally like a heathen</label>
                            <select class="form-control" id="Q3">
                            <option value="1">1 - ""</option>
                            <option value="2">2 - You're banned from my kitchen.</option>
                            <option value="3">3 - Meh, it's cool as long as you got that Kirkland jelly</option>
                            <option value="4">4 - Yes, but only to mess with my significant other</option>
                            <option value="5">5 - Yes!</option>
                            </select>
                    </div>
                    <div class="form-group">
                            <label for="Q4">Best Starter Pokemon</label>
                            <select class="form-control" id="Q4">
                            <option value="1">1 - Bulbasaur</option>
                            <option value="2">2 - What's Pokemon?</option>
                            <option value="3">3 - I play Pokemon Go..?</option>
                            <option value="4">4 - Squirtle</option>
                            <option value="5">5 - Charmander</option>
                            </select>
                    </div>
                    <div class="form-group">
                            <label for="Q5">How do you serve cereal?</label>
                            <select class="form-control" id="Q5">
                            <option value="1">1 - Bowl, Milk, Cereal</option>
                            <option value="2">2 - Milk, Cereal, Bowl</option>
                            <option value="3">3 - You should really be eating oatmeal</option>
                            <option value="4">4 - Bowl, Cereal, Milk</option>
                            <option value="5">5 - Bowl, Frosted Flakes, Sliced Banana, Milk</option>
                            </select>
                    </div>
                    <div class="form-group">
                            <label for="Q1">Ketchup on your hotdog?</label>
                            <select class="form-control" id="Q6">
                            <option value="1">1 - </option>
                            <option value="2">2 - </option>
                            <option value="3">3 - </option>
                            <option value="4">4 - </option>
                            <option value="5">5 - </option>
                            </select>
                    </div>
                    <div class="form-group">
                        <label for="Q2">Turkey bacon is real bacon</label>
                        <select class="form-control" id="Q7">
                            <option value="1">1 - </option>
                            <option value="2">2 - </option>
                            <option value="3">3 - </option>
                            <option value="4">4 - </option>
                            <option value="5">5 - </option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="Q3">I cut my sandwiches and toast horizontally like a heathen</label>
                        <select class="form-control" id="Q8">
                            <option value="1">1 - </option>
                            <option value="2">2 - </option>
                            <option value="3">3 - </option>
                            <option value="4">4 - </option>
                            <option value="5">5 - </option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="Q4">Best Starter Pokemon</label>
                        <select class="form-control" id="Q9">
                            <option value="1">1 - </option>
                            <option value="2">2 - </option>
                            <option value="3">3 - </option>
                            <option value="4">4 - </option>
                            <option value="5">5 - </option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="Q5">How do you serve cereal?</label>
                        <select class="form-control" id="Q10">
                            <option value="1">1 - </option>
                            <option value="2">2 - </option>
                            <option value="3">3 - </option>
                            <option value="4">4 - </option>
                            <option value="5">5 - </option>
                        </select>
                    </div>
                </form>
                <br>
                <hr>
                <div class="text-center">
                    <button type="submit" id="submit" class="btn btn-primary" data-toggle="modal" data-target="#compatibleFriend" data-whatever="">Submit</button>
                    <!-- <button type="submit" id="submit" class="btn btn-primary">Submit</button> -->
                </div>
            </div>

            <footer class="footer">
                <div class="container">
                <p><a href="/api/friends">API Friends List</a> | 
                    <!-- <a href="/api/waitlist">API Wait List</a> |  -->
                    <a href="">GitHub Repo</a></p>
                </div>
            </footer>
        </div>
        <div class="modal" id="compatibleFriend" tabindex="-1" role="dialog">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title"></h5>
                        <!-- <h5 class="modal-title"></h5> -->
                        <!-- <button type="button" class="close" data-dismiss="modal" aria-label="Close"> -->
                        <!-- <span aria-hidden="true">&times;</span> -->
                        <!-- </button> -->
                    </div>
                    <div class="modal-body">
                        <p id="friend-name"></p>
                        <img id="friend-photo" src="" class="img-thumbnail">
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    </div>
                </div>
            </div>
        </div>        


    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <!-- <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script> -->
    <script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

    <script>
        $("#submit").on("click", function (event) {
            event.preventDefault();

            if ( ($("#name").val().trim() !== "") && ($("#photo").val().trim() !== "")) {
                var newFriend = {
                    name:
                        $("#name").val(),
                    photo:
                        $("#photo").val(),
                    scores: [   
                        $("#Q1").val(),
                        $("#Q2").val(),
                        $("#Q3").val(), 
                        $("#Q4").val(), 
                        $("#Q5").val(),
                        $("#Q6").val(), 
                        $("#Q7").val(), 
                        $("#Q8").val(), 
                        $("#Q9").val(), 
                        $("#Q10").val()
                    ]
                // END OF: var newFriend = {
                };
            
            
                console.log(newFriend);
                // $("#compatibleFriend").modal("show");
                
                // $.post("/api/friends", newFriend, function(data){
                    // console.log(`this is the data from cb: ${data}`);
                    // console.log(data.name);
                    // console.log(data.photo);
                    // $("#compatibleFriend").modal("show");
                    // showModal(data);
                    $('#compatibleFriend').on('show.bs.modal', function (event) {
                            // If necessary, you could initiate an AJAX request here (and then do the updating in a callback).
                            // Update the modal's content. We'll use jQuery here, but you could use a data binding library or other methods instead.
                            var modal = $(this)
                            
                            $.post("/api/friends", newFriend, (data) => {
                                // console.log(`this is the data from cb: ${data}`);
                                console.log(data.name);
                                console.log(data.photo);
                                // $("#compatibleFriend").modal("show");
                            modal.find('.modal-title').text("Friend Found!")
                            modal.find('.modal-body #friend-name').text(data.name)
                            modal.find('.modal-body #friend-photo').attr('src', data.photo);
                            console.log("test show modal")


                            // END OF: $.post("/api/friends", newFriend, function(data){
                            });

                    })

                // END OF: $.post("/api/friends", newFriend, function(data){
                // });

                // function showModal(data) {
                //     // console.log(data);

                //     $('#compatibleFriend').on('show.bs.modal', function (event, data) {
                //             // If necessary, you could initiate an AJAX request here (and then do the updating in a callback).
                //             // Update the modal's content. We'll use jQuery here, but you could use a data binding library or other methods instead.
                //             // $.post("/api/friends", newFriend, function(data){
                //                 // console.log(`this is the data from cb: ${data}`);
                //                 console.log(data.name);
                //                 // console.log(data.photo);
                //                 // $("#compatibleFriend").modal("show");
                //                 var modal = $(this)
                //             modal.find('.modal-title').text("Friend Found!")
                //             modal.find('.modal-body').text("name of friend")
                //             console.log("test show modal")


                //             // END OF: $.post("/api/friends", newFriend, function(data){
                //             // });

                //     })
                // }

            // END OF: if ( ($("#name").val().trim() !== "") && ($("#photo").val().trim() !== "")) {
            }
        // END OF: $("#submit").on("click", function (event) {
        });




    </script>
</body>
</html>